
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://outdated.legendu.net/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
        disabled="disabled"
    href="https://outdated.legendu.net/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
            disabled="disabled"
          href="https://outdated.legendu.net/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://outdated.legendu.net/theme/pygments/github.min.css">


  <link rel="stylesheet"
        type="text/css"
        href="https://outdated.legendu.net/theme/stork/stork.css" />

  <link rel="stylesheet" type="text/css" href="https://outdated.legendu.net/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://outdated.legendu.net/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://outdated.legendu.net/theme/font-awesome/css/solid.css">







 

<meta name="author" content="Benjamin Du" />
<meta name="description" content="Things under legendu.net/outdated are outdated technologies that the author does not plan to update any more. Please look for better alternatives. uv (implemented in Rust) is the new cool kid now and is prefer to poetry. Tips and Traps Python Poetry is current the best project management tool …" />
<meta name="keywords" content="programming, Python, poetry, build tool, dependency management">


  <meta property="og:site_name" content="Ben Chuanlong Du's Blog"/>
  <meta property="og:title" content="Manage Your Python Project Using Poetry"/>
  <meta property="og:description" content="Things under legendu.net/outdated are outdated technologies that the author does not plan to update any more. Please look for better alternatives. uv (implemented in Rust) is the new cool kid now and is prefer to poetry. Tips and Traps Python Poetry is current the best project management tool …"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://outdated.legendu.net/blog/python-poetry-tips/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2019-03-02 11:17:44-08:00"/>
  <meta property="article:modified_time" content="2025-04-30 14:48:52-07:00"/>
  <meta property="article:author" content="https://outdated.legendu.net/author/benjamin-du.html">
  <meta property="article:section" content="Computer Science"/>
  <meta property="article:tag" content="programming"/>
  <meta property="article:tag" content="Python"/>
  <meta property="article:tag" content="poetry"/>
  <meta property="article:tag" content="build tool"/>
  <meta property="article:tag" content="dependency management"/>
  <meta property="og:image" content="">

  <title>Ben Chuanlong Du's Blog &ndash; Manage Your Python Project Using Poetry</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="https://outdated.legendu.net/">
      <img src="https://outdated.legendu.net/theme/img/profile.png" alt="" title="">
    </a>

    <h1>
      <a href="https://outdated.legendu.net/"></a>
    </h1>

    <p>Change is eternal.</p>

    <div class="stork">
      <input class="stork-input" type="text" autocomplete="off" name="q" data-stork="sitesearch" placeholder="Search..."/>
      <div class="stork-output" data-stork="sitesearch-output"></div>
    </div>


    <ul class="social">
      <li>
        <a class="sc-linkedin"
           href="https://www.linkedin.com/in/ben-chuanlong-du-1239b221/"
           target="_blank">
          <i class="fa-brands fa-linkedin"></i>
        </a>
      </li>
      <li>
        <a class="sc-github"
           href="https://github.com/legendu-net/"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
      <li>
        <a class="sc-stack-overflow"
           href="https://stackoverflow.com/users/7808204/benjamin-du?tab=profile"
           target="_blank">
          <i class="fa-brands fa-stack-overflow"></i>
        </a>
      </li>
      <li>
        <a class="sc-docker"
           href="https://hub.docker.com/u/dclong"
           target="_blank">
          <i class="fa-brands fa-docker"></i>
        </a>
      </li>
      <li>
        <a class="sc-twitter"
           href="https://twitter.com/longendu"
           target="_blank">
          <i class="fa-brands fa-twitter"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="https://www.legendu.net">Home</a>
  <a href="https://outdated.legendu.net">Blog</a>
  <a href="https://outdated.legendu.net/archives.html">Archives</a>
  <a href="https://outdated.legendu.net/categories.html">Categories</a>
  <a href="https://outdated.legendu.net/tags.html">Tags</a>
  <a href="https://www.legendu.net/pages/about">About</a>


</nav>

<article class="single">
  <header>
      
    <h1 id="python-poetry-tips">Manage Your Python Project Using Poetry</h1>
    <p>
      Posted on Mar 02, 2019 in <a href="https://outdated.legendu.net/category/computer-science.html">Computer Science</a>

    </p>
  </header>


  <div>
    <p><strong>Things under legendu.net/outdated are outdated technologies that the author does not plan to update any more. Please look for better alternatives.</strong></p>
<p><a href="https://www.legendu.net/misc/blog/manage-python-projects-using-uv">uv</a>
(implemented in Rust)
is the new cool kid now
and is prefer to poetry.</p>
<h2 id="tips-and-traps">Tips and Traps</h2>
<ol>
<li>
<p>Python Poetry is current the best project management tool for Python!</p>
</li>
<li>
<p>Python Poetry supports Python package dependencies on GitHub.
    For example,
    if a Python package depends on https://github.com/dclong/dsutil,
    then you can add it using the following.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>add<span class="w"> </span>git+https://github.com/dclong/dsutil.git
</code></pre></div>

<p>Or</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>add<span class="w"> </span>git+ssh://git@github.com/dclong/dsutil.git
</code></pre></div>

<p>For more details,
please refer to
<a href="https://python-poetry.org/docs/cli/#add.">poetry add</a>
and
<a href="https://python-poetry.org/docs/dependency-specification/#git-dependencies">git dependencies</a>
.</p>
</li>
<li>
<p><code>poetry install</code> removes non needed libraries. 
    A tricky situation is that if you have dependency A 
    which depends on dependency B,
    and you have specified both A and B in <code>pyproject.toml</code>.
    Removing dependency B from <code>pyrpoject.toml</code> and then running <code>poetry install</code> 
    won't remove the library B from the virtual environment as B is still needed by A.</p>
</li>
<li>
<p>Poetry has lots of issues in Windows currently.
    It is suggested that you avoid using poetry in Windows.</p>
</li>
<li>
<p>If you encounter the following error message
    when running <code>poetry install</code>,</p>
<blockquote>
<p>[Errno 2] No such file or directory: '/path/to/readme.md'</p>
</blockquote>
<p>it means that you have specified <code>tool.poetry.readme</code> 
to be <code>readme.md</code> in <code>pyproject.toml</code>
but <code>readme.md</code> does not exists under root directory of the project.</p>
</li>
</ol>
<h2 id="install-python-poetry">Install Python Poetry</h2>
<ol>
<li>
<p>Follow the <a href="https://python-poetry.org/docs/#installation">official tutorial</a>.</p>
</li>
<li>
<p>Using xinstall.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># install xinstall if it hasn&#39;t been installed</span>
sudo<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>git+https://github.com/dclong/xinstall@master
<span class="c1"># install poetry using xinstall</span>
xinstall<span class="w"> </span>pt<span class="w"> </span>-ic
</code></pre></div>

</li>
</ol>
<h2 id="updating-python-poetry">Updating Python Poetry</h2>
<p>Updating poetry to the latest stable version is as simple as calling the self:update command.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>self:update
</code></pre></div>

<p>If you want to install prerelease versions, you can use the --preview option.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>self:update<span class="w"> </span>--preview
</code></pre></div>

<h2 id="usage">Usage</h2>
<h3 id="createinitialize-a-new-project">Create/Initialize a New Project</h3>
<ol>
<li>
<p>Create a new Python project using poetry.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>new<span class="w"> </span>proj
</code></pre></div>

</li>
<li>
<p>Initialize an existing Python project using poetry.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>init
</code></pre></div>

</li>
</ol>
<h3 id="install-dependencies">Install Dependencies</h3>
<ol>
<li>
<p>Installl all dependencies.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>install
</code></pre></div>

</li>
<li>
<p>Installl all but dev dependencies.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>install<span class="w">  </span>--no-dev
</code></pre></div>

</li>
</ol>
<h3 id="export-dependencies">Export Dependencies</h3>
<ol>
<li>Export the lock file to <code>requirements.txt</code> 
    so that the dependency can be installed using <code>pip</code>.<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span><span class="nb">export</span><span class="w"> </span>-f<span class="w"> </span>requirements.txt<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
</code></pre></div>

</li>
</ol>
<h3 id="run-commands-in-the-virtual-environment">Run Commands in the Virtual Environment</h3>
<p><code>poetry run cmd</code> is a quick to run <code>cmd</code> using the virtual environment managed by <code>poetry.
Another way is to manually set</code>PATH<code>before you invoke</code>cmd`. 
For example,</p>
<div class="highlight"><pre><span></span><code><span class="nv">PATH</span><span class="o">=</span>.venv/bin:<span class="nv">$PATH</span><span class="w"> </span>cmd
</code></pre></div>

<ol>
<li>
<p>Run test suits using pytest.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>run<span class="w"> </span>pytest
</code></pre></div>

<p>Or if you want to make it specific to collect test suits from the <code>test</code> directory 
under the root directory of the project.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span><span class="nb">test</span>
</code></pre></div>

</li>
<li>
<p>Run pytype.</p>
<div class="highlight"><pre><span></span><code>poetry<span class="w"> </span>run<span class="w"> </span>pytype<span class="w"> </span>.
</code></pre></div>

</li>
</ol>
<h2 id="user-tasks">User Tasks</h2>
<p>https://github.com/sdispater/poetry/pull/591</p>
<p>https://github.com/sdispater/poetry/issues/241</p>
<h2 id="configuration">Configuration</h2>
<p>https://python-poetry.org/docs/cli/#config</p>
<p>https://python-poetry.org/docs/configuration/</p>
<p>Pleaser refer to
<a href="https://github.com/dclong/pyproject.toml">pyproject.toml</a>
for examples of configuration for Python Poetry.</p>
<h2 id="restrict-operating-systems-in-python-poetry">Restrict Operating Systems in Python Poetry</h2>
<p><a href="https://stackoverflow.com/questions/64094979/how-can-i-specify-dependencies-on-operating-system-in-python-poetry/68968188#68968188">How can I specify dependencies on operating system in Python Poetry?</a></p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.poetry]</span>
<span class="c1"># ...</span>
<span class="na">classifiers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[</span>
<span class="w">    </span><span class="na">&quot;Operating System</span><span class="w"> </span><span class="o">:</span><span class="s">: POSIX :: Linux&quot;,</span>
<span class="na">]</span>
</code></pre></div>

<p>https://python-poetry.org/docs/pyproject/#classifiers</p>
<p>https://pypi.org/classifiers/</p>
<p>https://github.com/python-poetry/poetry/issues/738</p>
<p>https://github.com/python-poetry/poetry/issues/3356</p>
<h2 id="references">References</h2>
<p>https://github.com/sdispater/poetry/issues/522</p>
<p>https://github.com/sdispater/poetry/issues/655</p>
<p>https://github.com/sdispater/poetry/issues/621</p>
<p><a href="https://poetry.eustace.io/docs/">Poetry Documentation</a></p>
<p>https://codingdose.info/2018/08/02/develop-and-publish-with-poetry/</p>
<p>https://hackersandslackers.com/poetic-python-project-packaging/</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://outdated.legendu.net/tag/programming.html">programming</a>
      <a href="https://outdated.legendu.net/tag/python.html">Python</a>
      <a href="https://outdated.legendu.net/tag/poetry.html">poetry</a>
      <a href="https://outdated.legendu.net/tag/build-tool.html">build tool</a>
      <a href="https://outdated.legendu.net/tag/dependency-management.html">dependency management</a>
    </p>
  </div>






<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'dclong';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy;  </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://outdated.legendu.net/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="False"
          data-default-theme="light"
          type="text/javascript">
  </script>
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Ben Chuanlong Du's Blog ",
  "url" : "https://outdated.legendu.net",
  "image": "",
  "description": ""
}
</script><a href="https://github.com/dclong/outdated" target="_blank" class="github-corner" aria-label="View source on Github">
    <svg width="80"
         height="80"
         viewBox="0 0 250 250"
         style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
         aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor"
              style="transform-origin: 130px 106px;"
              class="octo-arm">
        </path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor"
              class="octo-body">
        </path>
    </svg>
</a>
  <script src="https://outdated.legendu.net/theme/stork/stork.js"></script>
  <script>
    stork.register("sitesearch", "https://outdated.legendu.net/search-index.st", {showProgress: false});
  </script>

</body>
</html>