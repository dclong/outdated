
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://outdated.legendu.net/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
        disabled="disabled"
    href="https://outdated.legendu.net/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
            disabled="disabled"
          href="https://outdated.legendu.net/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://outdated.legendu.net/theme/pygments/github.min.css">


  <link rel="stylesheet"
        type="text/css"
        href="https://outdated.legendu.net/theme/stork/stork.css" />

  <link rel="stylesheet" type="text/css" href="https://outdated.legendu.net/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://outdated.legendu.net/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://outdated.legendu.net/theme/font-awesome/css/solid.css">







 

<meta name="author" content="Ben Chuanlong Du" />
<meta name="description" content="Things under legendu.net/outdated are outdated technologies that the author does not plan to update any more. Please look for better alternatives. End an IML procedure with quit;. You should never use run; to end an IML procedure because it is used for calling user-defined functions in IML procedures …" />
<meta name="keywords" content="SAS, matrix, programming, IML">


  <meta property="og:site_name" content="Ben Chuanlong Du's Blog"/>
  <meta property="og:title" content="Tips for the IML Procedure in SAS"/>
  <meta property="og:description" content="Things under legendu.net/outdated are outdated technologies that the author does not plan to update any more. Please look for better alternatives. End an IML procedure with quit;. You should never use run; to end an IML procedure because it is used for calling user-defined functions in IML procedures …"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://outdated.legendu.net/blog/sas-iml-procedure/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2012-07-19 15:30:52-07:00"/>
  <meta property="article:modified_time" content="2015-02-19 15:30:52-08:00"/>
  <meta property="article:author" content="https://outdated.legendu.net/author/ben-chuanlong-du.html">
  <meta property="article:section" content="Computer Science"/>
  <meta property="article:tag" content="SAS"/>
  <meta property="article:tag" content="matrix"/>
  <meta property="article:tag" content="programming"/>
  <meta property="article:tag" content="IML"/>
  <meta property="og:image" content="">

  <title>Ben Chuanlong Du's Blog &ndash; Tips for the IML Procedure in SAS</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="https://outdated.legendu.net/">
      <img src="https://outdated.legendu.net/theme/img/profile.png" alt="" title="">
    </a>

    <h1>
      <a href="https://outdated.legendu.net/"></a>
    </h1>

    <p>Change is eternal.</p>

    <div class="stork">
      <input class="stork-input" type="text" autocomplete="off" name="q" data-stork="sitesearch" placeholder="Search..."/>
      <div class="stork-output" data-stork="sitesearch-output"></div>
    </div>


    <ul class="social">
      <li>
        <a class="sc-linkedin"
           href="https://www.linkedin.com/in/ben-chuanlong-du-1239b221/"
           target="_blank">
          <i class="fa-brands fa-linkedin"></i>
        </a>
      </li>
      <li>
        <a class="sc-github"
           href="https://github.com/legendu-net/"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
      <li>
        <a class="sc-stack-overflow"
           href="https://stackoverflow.com/users/7808204/benjamin-du?tab=profile"
           target="_blank">
          <i class="fa-brands fa-stack-overflow"></i>
        </a>
      </li>
      <li>
        <a class="sc-docker"
           href="https://hub.docker.com/u/dclong"
           target="_blank">
          <i class="fa-brands fa-docker"></i>
        </a>
      </li>
      <li>
        <a class="sc-twitter"
           href="https://twitter.com/longendu"
           target="_blank">
          <i class="fa-brands fa-twitter"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="https://www.legendu.net">Home</a>
  <a href="https://outdated.legendu.net">Blog</a>
  <a href="https://outdated.legendu.net/archives.html">Archives</a>
  <a href="https://outdated.legendu.net/categories.html">Categories</a>
  <a href="https://outdated.legendu.net/tags.html">Tags</a>
  <a href="https://www.legendu.net/pages/about">About</a>


</nav>

<article class="single">
  <header>
      
    <h1 id="sas-iml-procedure">Tips for the IML Procedure in SAS</h1>
    <p>
      Posted on Jul 19, 2012 in <a href="https://outdated.legendu.net/category/computer-science.html">Computer Science</a>

    </p>
  </header>


  <div>
    <p><strong>Things under legendu.net/outdated are outdated technologies that the author does not plan to update any more. Please look for better alternatives.</strong></p>
<p><img src="http://dclong.github.io/media/sas/sas.jpg" height="200" width="240" align="right"/></p>
<ol>
<li>
<p>End an <code>IML</code> procedure with <code>quit;</code>.
You should never use <code>run;</code> to end an IML procedure
because it is used for calling user-defined functions in IML procedures.</p>
</li>
<li>
<p>Until SAS 9.3,
the <code>IML</code> procedure does not support overloading functions or recursive functions. </p>
</li>
<li>
<p>You can define functions in the <code>IML</code> procedure, and the definition can be nested. 
That is you can define another function in a user-defined function. 
Note that the order of definition of functions matter (similar to C). 
A function must be defined before it is called. </p>
</li>
<li>
<p>In the <code>IML</code> procedure, 
every data object is a matrix.
There is no concept of vector in the IML procedure like R does.
However, elements of a matrix can be accessed by a single index (e.g., x[3]),
so you can a matrix with 1 row/column as if it is a vector (as in R).
When a matrix has multiple rows and columns, 
you can still access its elements using a single index,
but be aware that elements are read by ROW 
which is different from R.
For example, 
the following code prints out 2 and 10.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kr">proc iml;</span>
    <span class="k">x</span> = {<span class="m">1</span> <span class="m">2</span> <span class="m">3</span>, <span class="m">10</span> <span class="m">100</span> <span class="m">1000</span>};
    m = nrow(<span class="k">x</span>);
    n = ncol(<span class="k">x</span>);
    print (<span class="k">x</span>[<span class="m">2</span>]);
    print(<span class="k">x</span>[<span class="m">4</span>])<span class="kr">;</span>
<span class="kr">quit;</span>
</code></pre></div>

<ol>
<li>
<p>In SAS, 
data sets are global which means that any procedure can use a created data set.
However, 
variables defined in a <code>IML</code> procedure is local, 
which means that variables defined in different <code>IML</code> procedures are not shared. </p>
</li>
<li>
<p>You can define subroutines in a <code>IML</code> procedure. 
A subroutine is just a bunch of statment putted together. 
A subroutine does not have any argument, 
which means that it must invoked without parentheses. 
A module/function can have argument(s), 
and must be invoked with parentheses. 
Another important difference is that 
variables defined in a function takes effect only in the function 
while variables in a module takes effect in the whole <code>IML</code> procedure after its definition. 
Based on these comparision, 
function is more useful and better than module in the <code>IML</code> procedure. </p>
</li>
<li>
<p>The slicing of vectors and matrices in the IML procedure is similar to that in R.</p>
</li>
<li>
<p>The name of a function in the <code>IML</code> procedure can exceeds 8 characters, but I am not
sure about the maximum length.</p>
</li>
<li>
<p>You can use <code>mattrib</code> to modify attributes of matrix in the <code>IML</code> procedure. </p>
</li>
<li>
<p>You cannot print value of an expression directly in the IML procedure. 
You must either assign the value of the expression to a variable first or put the expression into parentheses. For example, 
proc iml;
    print 1+2;
quit;
raises an error while the following two ways of coding works.
proc iml;
    print (1+2);
quit;
proc iml;
    x = 1+2;
    print x;
quit;</p>
</li>
<li>
<p>You cannot use the <code>put</code> command to print value of variables in the IML procedure,
instead, 
you should use the <code>print</code> command. 
However, 
unlike <code>put</code>, 
<code>print</code> cannot format (e.g., date9.) output values.</p>
</li>
<li>
<p>You can <code>||</code> to combine matrix horizontally and <code>//</code> to combine matrix vertically. </p>
</li>
<li>
<p>You can define a same module multiple times in an IML procedure.
The last defintion will be used.</p>
</li>
<li>
<p>By default, 
modules defined in an IML procedure is not visible to another IML procedure.
However,
you can store modules (to a library) defined in an IML procedure 
using the statement 
    store module=LocNonMissingRows; 
And you probably want to change the library for storing modules to a permanent one
before you storing a module.
You can do this using 
    reset storage=BlogDir.BlogModules; 
You can then use a stored module in aother IML procedure by loading it first.
    load module=LocNonMissingRows;</p>
</li>
<li>
<p>You can read files using the <code>%include</code> command in an IML procedure.
This means that you can define modules and put them into sas files 
and read them in when needed. 
This makes your SAS code more resuable and easier to manage.
You can also store user-defined modules 
and load them to be accessible later. 
However, it is not as convenient as <code>%include</code>. 
And store a module to a permannet location make it inconvenint to update these moduels.
It is suggested that you always use <code>%include</code> to read definition of modules from files.</p>
</li>
</ol>
<h2 id="questions">Questions</h2>
<ol>
<li>not very sure how to use default arguments in user-defined functions in the <code>IML</code> procedure.</li>
</ol>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://outdated.legendu.net/tag/sas.html">SAS</a>
      <a href="https://outdated.legendu.net/tag/matrix.html">matrix</a>
      <a href="https://outdated.legendu.net/tag/programming.html">programming</a>
      <a href="https://outdated.legendu.net/tag/iml.html">IML</a>
    </p>
  </div>






<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'dclong';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy;  </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://outdated.legendu.net/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="False"
          data-default-theme="light"
          type="text/javascript">
  </script>
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Ben Chuanlong Du's Blog ",
  "url" : "https://outdated.legendu.net",
  "image": "",
  "description": ""
}
</script><a href="https://github.com/dclong/outdated" target="_blank" class="github-corner" aria-label="View source on Github">
    <svg width="80"
         height="80"
         viewBox="0 0 250 250"
         style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
         aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor"
              style="transform-origin: 130px 106px;"
              class="octo-arm">
        </path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor"
              class="octo-body">
        </path>
    </svg>
</a>
  <script src="https://outdated.legendu.net/theme/stork/stork.js"></script>
  <script>
    stork.register("sitesearch", "https://outdated.legendu.net/search-index.st", {showProgress: false});
  </script>

</body>
</html>